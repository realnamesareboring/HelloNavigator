---
layout: challenge
title: "Space Pirate Password Breach"
module_name: "Identity Defense Grid"
challenge_number: 1
total_challenges: 4
progress_percent: 25
xp_reward: 150
difficulty: "Beginner"
difficulty_stars: 2
workspace_icon: "üîê"
workspace_name: "Security Terminal"
workspace_mode: "Investigation"
terminal_mode: true

xis_message: "Navigator! We've intercepted a data dump from the space pirates who attacked our ship. The file contains crew passwords from a compromised outpost. We need to analyze their security practices and find the master access code they're using to infiltrate other systems!"

mission_brief: |
  **URGENT SECURITY BREACH ANALYSIS**
  
  The space pirates have compromised the Kepler Station outpost and stolen crew credentials. Your mission:
  
  - Analyze the intercepted password database
  - Identify security vulnerabilities in their password policies
  - Find patterns that reveal the pirates' master access strategy
  - Extract the flag that proves you've uncovered their method

objectives:
  - "Download and examine the intercepted password file"
  - "Identify the 3 most common weak password patterns"
  - "Find the admin account with the weakest password"
  - "Discover the hidden master access code pattern"
  - "Submit the flag in format: NAVIGATOR{...}"

available_hints: 4

available_tools:
  - id: "password-analyzer"
    name: "Password Analyzer"
    icon: "üîç"
  - id: "pattern-detector"
    name: "Pattern Detector" 
    icon: "üéØ"
  - id: "text-processor"
    name: "Text Processor"
    icon: "üìù"

# ADD: Evidence Files to the existing resources section  
resources:
  - name: "üìÑ crew_passwords.txt (2.1 KB)"
    url: "#"
    icon: "üîê"
    type: "evidence"
  - name: "Password Security Guide"
    url: "https://pages.nist.gov/800-63-3/"
    icon: "üìñ"
  - name: "Common Password Attacks"
    url: "#"
    icon: "‚ö†Ô∏è"
  - name: "Security Best Practices"
    url: "#"
    icon: "‚úÖ"
---

<!-- This content goes into the CENTER workspace panel -->
<div class="password-breach-challenge">
    <div class="challenge-briefing">
        <h3>üö® Emergency Briefing</h3>
        <p>
            <strong>Intelligence Report:</strong> Space pirates breached Kepler Station using a coordinated attack. 
            We've recovered their data dump containing <code>crew_passwords.txt</code>.
        </p>
        
        <div class="investigation-steps">
            <h4>üîç Investigation Protocol</h4>
            <ol>
                <li><strong>Download Evidence:</strong> Use the evidence file in the Resources panel (right)</li>
                
                <li><strong>Examine Data:</strong> Use <code>cat crew_passwords.txt</code> in the terminal</li>
                
                <li><strong>Search Patterns:</strong> Use commands like <code>grep admin crew_passwords.txt</code></li>
                
                <li><strong>Analyze Security:</strong> Try <code>analyze crew_passwords.txt</code></li>
                
                <li><strong>Find the Flag:</strong> Look for the hidden NAVIGATOR{...} pattern</li>
                
                <li><strong>Submit:</strong> Use <code>submit NAVIGATOR{your_flag}</code></li>
            </ol>
        </div>


    <div class="custom-mission-details">
        <h3 class="mission-details-title">üìã URGENT SECURITY BREACH ANALYSIS</h3>
    
        <p class="mission-intro">The space pirates have compromised the Kepler Station outpost and stolen crew credentials. <strong>Your mission:</strong></p>
    
        <ul class="mission-bullets-custom">
            <li class="mission-bullet-item">
                <span class="bullet-icon">üéØ</span>
                <span class="bullet-text">Analyze the intercepted password database</span>
            </li>
            
            <li class="mission-bullet-item">
                <span class="bullet-icon">üîç</span>
                <span class="bullet-text">Identify security vulnerabilities in their password policies</span>
            </li>
            
            <li class="mission-bullet-item">
                <span class="bullet-icon">üè¥‚Äç‚ò†Ô∏è</span>
                <span class="bullet-text">Find patterns that reveal the pirates' master access strategy</span>
            </li>
            
            <li class="mission-bullet-item">
                <span class="bullet-icon">üö©</span>
                <span class="bullet-text">Extract the flag that proves you've uncovered their method</span>
            </li>
        </ul>
    </div>
    
    <!-- Terminal will be loaded here by the framework -->
    <div class="workspace-hint">
        <p>üí° <strong>Start Here:</strong> Click the evidence file in the Resources panel (right), then use <code>cat crew_passwords.txt</code> in the terminal!</p>
    </div>

    <!-- Action Buttons -->
    <div class="challenge-actions" style="margin: 2rem 0; text-align: center;">
        <button class="return-to-bridge" onclick="window.location.href='../bridge.html'">
            üõ∏ Return to Bridge
        </button>
        <button class="submit-solution-btn" onclick="submitFlag()" style="margin-left: 1rem; background: linear-gradient(135deg, #ff8000, #ff4000); color: #fff; padding: 1rem 2rem; border: 2px solid #ff8000; border-radius: 8px; font-family: 'Orbitron', sans-serif; cursor: pointer;">
            üöÄ Submit Solution
        </button>
    </div>
</div>

<style>
/* Work WITH the existing framework, don't override it */
.password-breach-challenge {
    padding: 1rem;
}

.challenge-briefing {
    background: rgba(0, 30, 60, 0.8);
    border: 2px solid #00ffff;
    clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px));
    padding: 1.5rem;
    backdrop-filter: blur(10px);
    margin-bottom: 1rem;
}

.challenge-briefing h3 {
    color: #ff8000;
    font-family: 'Orbitron', sans-serif;
    margin-bottom: 1rem;
    text-shadow: 0 0 5px #ff8000;
}

.challenge-briefing h4 {
    color: #00ffff;
    font-family: 'Orbitron', sans-serif;
    margin: 1.5rem 0 0.5rem 0;
    font-size: 1rem;
}

.challenge-briefing p, .challenge-briefing li {
    color: #00ffff;
    font-size: 0.9rem;
    line-height: 1.4;
    margin-bottom: 0.75rem;
}

.challenge-briefing ol {
    margin: 0.5rem 0;
    padding-left: 1.5rem;
}

/* Fix spacing for mission brief */
.challenge-briefing ol li {
    margin-bottom: 1rem;
    padding: 0.5rem 0;
}

/* Fix spacing for objectives */
.objectives-list li {
    margin-bottom: 1.5rem;
    padding: 1rem;
    background: rgba(0, 255, 128, 0.05);
    border-left: 3px solid #00ff80;
    border-radius: 6px;
}

.investigation-steps {
    background: rgba(0, 255, 255, 0.05);
    border: 1px solid #00ffff;
    border-radius: 8px;
    padding: 1rem;
    margin: 1rem 0;
}

.workspace-hint {
    background: rgba(255, 255, 0, 0.1);
    border: 1px solid #ffff00;
    border-radius: 4px;
    padding: 0.75rem;
    margin-top: 1rem;
}

.workspace-hint p {
    color: #ffff00;
    font-size: 0.9rem;
    margin: 0;
}

code {
    background: rgba(0, 255, 255, 0.2);
    color: #00ffff;
    padding: 0.2rem 0.4rem;
    border-radius: 3px;
    font-family: 'Share Tech Mono', monospace;
}

/* Style return to bridge button */
.return-to-bridge {
    background: linear-gradient(135deg, #00ffff, #0080ff);
    color: #000;
    border: 2px solid #00ffff;
    padding: 1rem 2rem;
    border-radius: 8px;
    font-family: 'Orbitron', sans-serif;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 0 15px rgba(0, 255, 255, 0.3);
}

.return-to-bridge:hover {
    background: linear-gradient(135deg, #00ff80, #00ffff);
    box-shadow: 0 0 25px rgba(0, 255, 255, 0.6);
    transform: translateY(-2px);
}

.submit-solution-btn:hover {
    background: linear-gradient(135deg, #ffaa00, #ff8000) !important;
    box-shadow: 0 0 25px rgba(255, 128, 0, 0.6);
    transform: translateY(-2px);
}

/* Hide Need Help section */
.need-help {
    display: none;
}

/* Style evidence links in the resources panel */
.resource-link[href="#"] {
    cursor: pointer;
}

.resource-link[href="#"]:hover {
    background: rgba(255, 128, 0, 0.1);
    border-color: #ff8000;
}
/* Hide the dynamic mission-brief that gets overridden */
.mission-brief {
    display: none !important;
}

/* Custom mission details that dynamic engine won't touch */
.custom-mission-details {
    background: rgba(255, 128, 0, 0.08);
    border: 2px solid #ff8000;
    clip-path: polygon(0 0, calc(100% - 15px) 0, 100% 15px, 100% 100%, 15px 100%, 0 calc(100% - 15px));
    padding: 2rem;
    margin: 2rem 0;
    backdrop-filter: blur(10px);
}

.mission-details-title {
    color: #ff8000;
    font-family: 'Orbitron', sans-serif;
    font-size: 1.3rem;
    margin-bottom: 1.5rem;
    text-shadow: 0 0 10px #ff8000;
    text-align: center;
    border-bottom: 2px solid #ff8000;
    padding-bottom: 0.5rem;
}

.mission-intro {
    color: #ffffff;
    font-family: 'Share Tech Mono', monospace;
    font-size: 1rem;
    line-height: 1.6;
    margin-bottom: 2rem;
    text-align: center;
}

.mission-bullets-custom {
    list-style: none;
    padding: 0;
    margin: 0;
    display: flex;
    flex-direction: column;
    gap: 1.5rem;
}

.mission-bullet-item {
    display: flex;
    align-items: flex-start;
    gap: 1rem;
    padding: 1.25rem;
    background: rgba(255, 128, 0, 0.05);
    border-radius: 8px;
    border-left: 4px solid #ff8000;
    transition: all 0.3s ease;
    box-shadow: 0 2px 8px rgba(255, 128, 0, 0.1);
}

.mission-bullet-item:hover {
    background: rgba(255, 128, 0, 0.12);
    transform: translateX(8px);
    box-shadow: 0 4px 16px rgba(255, 128, 0, 0.2);
}

.bullet-icon {
    font-size: 1.3rem;
    flex-shrink: 0;
    margin-top: 0.1rem;
}

.bullet-text {
    color: #ffffff;
    font-family: 'Share Tech Mono', monospace;
    font-size: 0.95rem;
    line-height: 1.6;
    flex: 1;
}

/* Responsive design */
@media (max-width: 768px) {
    .custom-mission-details {
        padding: 1.5rem;
        margin: 1rem 0;
    }
    
    .mission-bullet-item {
        padding: 1rem;
        flex-direction: column;
        text-align: center;
        gap: 0.75rem;
    }
    
    .bullet-text {
        font-size: 0.9rem;
    }
}
</style>

<script>
// Enhance the existing resources section to handle evidence downloads
document.addEventListener('DOMContentLoaded', function() {
    // Find evidence resource links and make them downloadable
    const resourceLinks = document.querySelectorAll('.resource-link');
    
    resourceLinks.forEach(link => {
        const text = link.textContent.trim();
        
        // Check if this is the evidence file
        if (text.includes('crew_passwords.txt')) {
            // Make it downloadable instead of a regular link
            link.addEventListener('click', function(e) {
                e.preventDefault();
                downloadEvidenceFile('crew_passwords.txt');
            });
            
            // Add visual indicator
            link.style.background = 'linear-gradient(135deg, rgba(255, 128, 0, 0.2), rgba(204, 102, 0, 0.2))';
            link.style.borderColor = '#ff8000';
            
            // Add download status
            const statusSpan = document.createElement('span');
            statusSpan.textContent = ' ‚¨áÔ∏è';
            statusSpan.className = 'download-status';
            link.appendChild(statusSpan);
        }
    });
});

function downloadEvidenceFile(filename) {
    console.log('üìÅ Download initiated for:', filename);
    
    // Find the evidence link and add visual feedback
    const evidenceLink = document.querySelector('.resource-link[href="#"]');
    const statusSpan = evidenceLink?.querySelector('.download-status');
    
    if (statusSpan) {
        statusSpan.textContent = ' ‚è≥';
        evidenceLink.style.opacity = '0.7';
    }
    
    // Use your existing dynamic challenge engine or fallback
    if (window.dynamicChallengeEngine && window.dynamicChallengeEngine.evidenceFiles) {
        try {
            const content = window.dynamicChallengeEngine.evidenceFiles.get(filename);
            if (content) {
                // Create download
                const blob = new Blob([content], { type: 'text/plain' });
                const url = window.URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                window.URL.revokeObjectURL(url);
                
                // Update terminal
                if (window.terminalEngine) {
                    window.terminalEngine.addOutput(`[INFO] Evidence file ${filename} loaded successfully.`);
                    window.terminalEngine.addOutput('[INFO] Use terminal commands to examine the data.');
                }
                
                // Update status
                if (statusSpan) {
                    statusSpan.textContent = ' ‚úÖ';
                    evidenceLink.style.opacity = '1';
                }
            }
        } catch (error) {
            console.error('Download error:', error);
        }
    } else {
        // Fallback message
        alert('üìÅ Evidence file download initiated. Use the terminal to examine crew_passwords.txt');
    }
}

function submitFlag() {
    const flag = prompt('Enter the flag you discovered (NAVIGATOR{...}):');
    if (flag && flag.toUpperCase().includes('NAVIGATOR{WEAK_PASSWORDS_COMPROMISE_SECURITY}')) {
        alert('üéâ Excellent work, Navigator! Challenge completed!\n\nYou\'ve identified that weak passwords are the primary security vulnerability the space pirates exploit.');
        
        // Mark challenge as completed
        if (window.userProgressManager) {
            window.userProgressManager.completeChallenge('identity-defense', 'space-pirate-password-breach', 150);
        }
        
        // Optional: return to bridge
        setTimeout(() => {
            if (confirm('üõ∏ Return to bridge to continue your mission?')) {
                window.location.href = '../bridge.html';
            }
        }, 2000);
        
    } else if (flag) {
        alert('‚ùå Incorrect flag. \n\nüí° Hint: Look for the NAVIGATOR{...} pattern hidden in the password database. Try using "grep NAVIGATOR crew_passwords.txt" in the terminal.');
    }
}


</script>